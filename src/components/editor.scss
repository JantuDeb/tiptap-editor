@import url("https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap");

.editor-wrapper {
  --tt-toolbar-height: 44px;
  --tt-theme-text: var(--tt-gray-light-900);
  --tt-border-color: var(--tt-gray-light-300);

  .dark & {
    --tt-theme-text: var(--tt-gray-dark-900);
    --tt-border-color: var(--tt-gray-dark-a-50);
  }

  font-family: "Inter", sans-serif;
  color: var(--tt-theme-text);
  font-optical-sizing: auto;
  font-weight: 400;
  font-style: normal;

  &::-webkit-scrollbar {
    width: 0.25rem;
  }

  * {
    scrollbar-width: thin;
    scrollbar-color: var(--tt-scrollbar-color) transparent;
  }

  &::-webkit-scrollbar-thumb {
    background-color: var(--tt-scrollbar-color);
    border-radius: 9999px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  // Fullpage variant (default)
  &[data-variant="fullpage"] {
    width: 100%;
    height: 100%;
    overflow: hidden;
    background-color: var(--tt-bg-color);
    display: flex;
    flex-direction: column;
  }

  // Input variant
  &[data-variant="input"] {
    position: relative;
    display: flex;
    flex-direction: column;
    width: 100%;
    background-color: var(--tt-bg-color);
    border: 1px solid var(--tt-border-color);
    border-radius: 0.5rem;
    overflow: hidden;
    transition: border-color 0.2s ease;

    &:focus-within {
      border-color: var(--tt-primary-500);
      box-shadow: 0 0 0 3px rgba(var(--tt-primary-500-rgb), 0.1);
    }

    // Resize variants
    &[data-resize="vertical"] {
      overflow-y: auto;
      resize: vertical;
    }

    &[data-resize="horizontal"] {
      resize: horizontal;
    }

    &[data-resize="both"] {
      overflow-x: auto;
      resize: both;
    }

    &[data-resize="none"] {
      resize: none;
    }
  }
}

.tiptap.ProseMirror {
  font-family: "DM Sans", sans-serif;
}

// Editor content
.editor-content {
  // Fullpage variant
  &[data-variant="fullpage"] {
    max-width: 648px;
    width: 100%;
    margin: 0 auto;
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;

    .tiptap.ProseMirror.editor {
      width: 100%;
      min-height: 100%;
      padding: 2rem 0;
      box-sizing: border-box;
      outline: none;

      * {
        max-width: 100%;
        overflow-wrap: break-word;
      }

      img,
      table,
      video,
      .math-render {
        max-width: 100%;
        height: auto;
      }

      table {
        display: block;
        overflow-x: auto;
      }
    }
  }

  // Input variant
  &[data-variant="input"] {
    flex: 1;
    overflow: auto;
    display: flex;
    flex-direction: column;
    min-height: 0;

    .tiptap.ProseMirror.editor {
      flex: 1;
      padding: 0.75rem;
      outline: none;
      min-height: 100%;

      // Placeholder
      &.is-empty::before {
        color: var(--tt-gray-light-500);
        content: attr(data-placeholder);
        float: left;
        height: 0;
        pointer-events: none;

        .dark & {
          color: var(--tt-gray-dark-500);
        }
      }

      &.ProseMirror-focused:not(.is-empty)::before {
        display: none;
      }

      // Compact spacing for input variant
      > * {
        &:first-child {
          margin-top: 0;
        }

        &:last-child {
          margin-bottom: 0;
        }
      }

      p {
        margin: 0.5em 0;
        line-height: 1.6;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        margin: 0.75em 0 0.5em;
        line-height: 1.3;
      }

      h1 {
        font-size: 1.5em;
      }
      h2 {
        font-size: 1.3em;
      }
      h3 {
        font-size: 1.15em;
      }
      h4,
      h5,
      h6 {
        font-size: 1em;
      }

      ul,
      ol {
        padding-left: 1.5rem;
        margin: 0.5em 0;
      }

      li {
        margin: 0.25em 0;
      }

      pre {
        background-color: var(--tt-gray-light-100);
        border-radius: 0.375rem;
        padding: 0.75rem;
        margin: 0.5em 0;
        font-size: 0.875em;

        .dark & {
          background-color: var(--tt-gray-dark-800);
        }
      }

      code {
        background-color: var(--tt-gray-light-100);
        border-radius: 0.25rem;
        padding: 0.125rem 0.375rem;
        font-size: 0.875em;

        .dark & {
          background-color: var(--tt-gray-dark-800);
        }
      }
    }
  }
}

// Responsive
@media screen and (max-width: 480px) {
  .editor-content[data-variant="fullpage"] .tiptap.ProseMirror.editor {
    padding: 0.8rem;
  }

  .editor-content[data-variant="input"] .tiptap.ProseMirror.editor {
    padding: 0.5rem;
    font-size: 0.9375rem;
  }

  .toolbar[data-variant="input"] {
    padding: 0.375rem;
  }
}

// Optional: Size variants via custom data attributes
// .editor-wrapper[data-variant="input"] {
//   &[data-size="compact"] {
//     min-height: 80px;

//     .tiptap.ProseMirror.editor {
//       padding: 0.5rem;
//       font-size: 0.9375rem;
//     }
//   }

//   &[data-size="large"] {
//     min-height: 200px;
//   }

//   &[data-disabled="true"] {
//     opacity: 0.6;
//     cursor: not-allowed;
//     background-color: var(--tt-gray-light-50);

//     .dark & {
//       background-color: var(--tt-gray-dark-100);
//     }
//   }
// }
